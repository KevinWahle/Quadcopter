b = [0.0095958, 0.0191915, 0.0095958;
	 0.1084782, 0.1084782, 0.0000000;
	 0.0293045, 0.0586090, 0.0293045;
	 0.0179138, 0.0358276, 0.0179138;
	 0.0468088, 0.0936176, 0.0468088];

a = [1.0000000, -1.7792211, 0.8851647;
	 1.0000000, -0.9213973, 0.0000000;
	 1.0000000, -1.7306458, 0.9736852;
	 1.0000000, -1.8238846, 0.8584440;
	 1.0000000, -1.7378414, 0.9250766];
 
 b = [0.008784875849891947766079347559298184933  * [1, 2, 1];
	  0.007137563880441471879378934062287953566 * [1, 2, 1];
	  0.004543052029195668133076946304527155007 * [1, 2, 1];
	  0.00197349283749565776110990178437987197  * [1, 2, 1];
	  0.000391483007191031765533567599035791318 *[1, 2, 1]];

a = [1.0000000, -1.95649524036026867257476169470464810729 ,  0.99163474375983662323363887480809353292 ;
	 1.0000000, -1.947326103814979836315046668460126966238,  0.975876359336745879957675242621917277575;
	 1.0000000, -1.94440959785967093509384540084283798933 ,  0.962581805976453486195509867684450000525;
	 1.0000000, -1.945064582824105992031604728254023939371,  0.952958554174088812160903216863516718149;
	 1.0000000, -1.946338785662050652192078814550768584013,  0.947904717690814746511307475884677842259];
 
printMatrixAsCcode(b);
printMatrixAsCcode(a);
 
Ts = 1/1000;
H1 = tf(b(1, :), a(1, :), Ts);    
H2 = tf(b(2, :), a(2, :), Ts); 
H3 = tf(b(3, :), a(3, :), Ts); 
H4 = tf(b(4, :), a(4, :), Ts); 
H5 = tf(b(5, :), a(5, :), Ts); 
H = H1*H2*H3*H4*H5;
opts = bodeoptions;
%opts.YLim = [-25, 5];
opts.FreqUnits = 'Hz';
bode(H, opts);
%% Matlab matrix to C code
function printMatrixAsCcode(A)
    fprintf("double A[%d][%d] = {\n", size(A, 1), size(A, 2));
    for i = 1:size(A, 1)
        fprintf("\t{");
        for j = 1:size(A, 2)
            fprintf("%.7f", A(i,j));
            if j < size(A, 2)
                fprintf(", ");
            end
        end
        fprintf("}");
        if i < size(A, 1)
            fprintf(",\n");
        else
            fprintf("\n");
        end
    end
    fprintf("};\n");
end